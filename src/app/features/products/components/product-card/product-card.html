<mat-card class="product" [ngClass]="product().inStock ? 'stock' : 'out-of-stock'" appearance="outlined">
  <mat-card-header>
    <mat-card-subtitle>{{product().name}}</mat-card-subtitle>
  </mat-card-header>
  <img mat-card-image [src]="product().imageUrl" [alt]="product().name" [routerLink]="['/products',product().id]">
  <div>
    <button (click)="onToogleFavorite()" >{{ isFavorite() ? '‚ù§Ô∏è' : 'ü§ç' }}</button>
    <button  type="button" (click)="onToogleShowRatingForm()">Noter ce produit</button>
  </div>
  @if (showRatingForm){
    <form [formGroup]="ratingForm">
      <h4>Votre avis compte</h4>
      <mat-form-field>
        <mat-label>Avis</mat-label>
        <select matNativeControl formControlName="rate">
          <option value="1">‚≠ê</option>
          <option value="2">‚≠ê‚≠ê</option>
          <option value="3">‚≠ê‚≠ê‚≠ê</option>
          <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê</option>
          <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</option>
        </select>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Commentaire</mat-label>
        <textarea matInput
                  formControlName="comment"
                  cdkTextareaAutosize
                  #autosize="cdkTextareaAutosize"
                  cdkAutosizeMinRows="1"
                  cdkAutosizeMaxRows="5">
    </textarea>
      </mat-form-field>
      <button type="submit" [disabled]="ratingForm.invalid" (click)="sendRate()">Envoyer</button>
    </form>
  }




  <mat-card-content>
    <p>{{ product().description}}</p>
    <!-- <p>{{product.price | currency : 'EUR' : 'symbol' : '1.2-2' : 'fr' }}</p>-->
    <p>{{product().price | currency : 'EUR'}}</p>
    <p>‚≠ê{{product().rating}}/5</p>
    @switch (product().category){
      @case ('gaming'){
        <span class="sports">üéÆ Jeux vid√©o</span>
      }
      @case ('clothing'){
        <span class="badge red">üëï Mode</span>
      }
      @case ('home'){
        <span class="badge green">üè† Maison</span>
      }
      @case ('electronics'){
        <span class="badge blue">üì± High-tech</span>
      }
      @case ('sports'){
        <span class="badge blanc">‚öΩ Sport</span>
      }
      @default {
        <span class="badge gray">üì¶ Autre</span>
      }
    }
    @if (product().inStock) {
      <p>‚úÖ Disponible</p>
    } @else {
      <p>‚ùå En rupture</p>
    }
  </mat-card-content>
  <mat-card-actions>
    @if (product().inStock){
      <button matButton="elevated" (click)="onAddToCart()" >Ajouter au panier</button>
    } @else {
      <button matButton="elevated" [disabled]="true" class="btn-disabled">En repture</button>
    }
  </mat-card-actions>
</mat-card>

